<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>じゃんけん</title>
  <link href="https://fonts.googleapis.com/css?family=Noto+Sans+JP" rel="stylesheet" />
  <link rel="stylesheet" href="css/janken.css">
  <link href="https://fonts.googleapis.com/css2?family=Rounded+Mplus+1c&family=Luckiest+Guy&display=swap" rel="stylesheet">
</head>

<body>
  <header>
    <span class="nav_toggle">
        <i></i>
        <i></i>
        <i></i>
    </span>
    <nav class="nav">
        <ul class="nav_menu_ul">
            <li class="nav_menu_li"><a href="./index.html">LP</a></li>
            <li class="nav_menu_li"><a href="./janken.html">じゃんけん</a></li>
            <li class="nav_menu_li"><a href="./kurohige.html">黒ひげ危機一発</a></li>
        </ul>
    </nav>
  </header>

  <main>

    <section id="title">
      <h1>ポ○モン風じゃんけん</h1>
    </section>

    <div class="reset">
      <button id="reset_btn">リセット</button>
    </div>

    <div class="balls">
      <div id="ball_1">
        <img src="./images/ball.png" width="30px" height="30px" alt="">
      </div>
      <div id="ball_2">
        <img src="./images/ball.png" width="30px" height="30px" alt="">
      </div>
      <div id="ball_3">
        <img src="./images/ball.png" width="30px" height="30px" alt="">
      </div>
    </div>

    <div id="comp">
      <p id="comp_what">Lv.100</p>
    </div>

    <section id="enemy">
      <img src="./images/monster.png" alt="" id="monster" width="300px" height="400px">
    </section>

    <div id="versus">
      <p id="vs">vs</p>
    </div>

    <div class="balls">
      <div id="ball_4">
        <img src="./images/ball.png" width="30px" height="30px" alt="">
      </div>
      <div id="ball_5">
        <img src="./images/ball.png" width="30px" height="30px" alt="">
      </div>
      <div id="ball_6">
        <img src="./images/ball.png" width="30px" height="30px" alt="">
      </div>
    </div>

    <div id="me">
      <img src="/images/maccho.png" alt="" id="maccho" width="300px" height="400px">
    </div>

    <div id="name">
      <p id="reichel">れいちぇる</p>
    </div>

    <section id="hand">
      <div id="guchopa">
      </div>
    </section>

    <div id="yasei">
      <p id="yasei_p">野生のじゃんけんが現れた！！！！</p>
      <button id="text_btn">，</button>
    </div>

    <div class="select" style="display: none;">
        <button id="gu">グー</button>
        <button id="cho">チョキ</button>
        <button id="pa">パー</button>
    </div>

    <!-- ゲームクリア・ゲームオーバーの表示 -->
    <div class="game_clear">
      <div id="game_clear" style="display: none;">
        <img src="./images/game_clear.png" alt="">
      </div>

      <div id="game_false" style="display: none;">
        <img src="./images/game_over.png" alt="">
    </div>

    <div id="wincount">0</div>
    <div id="losecount">0</div>


  </main>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

  <script>

    // ハンバーガーメニュー
    $('.nav_toggle').on('click',function(){
        $('.nav_toggle, .nav').toggleClass('show');
    });


    const max = 2;
    const min = 0;

    const gu = 0;
    const cho = 1;
    const pa = 2;


    // タイトルアニメーション
    $('#title').animate()

    // テキスト部分
    $('#text_btn').on('click',function(){
      $('#yasei_p').text("選択してね").css('margin-left', '80px');
      $('.select').fadeIn(500);
    });

    // クリックしたらコンピュータと対戦
    $('#gu').on('click',function(){
      let player = 0;
      const comp = Math.floor(Math.random() * (max-min+1)-min);

      // 選択したら表示
      setTimeout(function(){
        $('#guchopa').html('<img src="./images/janken_gu.png" class="junken_img" alt="">');
      },1000);

      setTimeout(function() {
          $('#guchopa').html('');  // ← 空に戻す
        }, 3000);


      //　じゃんけん・・・の演出
      $('#result').text('じゃんけん・・・')


      // 分岐処理

      setTimeout(function(){
        if(comp===0 && player===0
        ){
          $('#result').text('あいこ')
        } else if (comp===1 && player===0){
          $('#result').text('勝ち')
        } else if (comp===2 && player===0){
          $('#result').text('負け')
        }
      }, 1500);

      console.log(comp);
      console.log(player)

      // コンピュータの手表示
      setTimeout(function(){
        if(comp===0){
          $('#comp_what').html('<img src="./images/janken_gu.png" class="comp_janken_img" alt="">');
        }

        if(comp===1){
          $('#comp_what').html('<img src="./images/janken_choki.png" class="comp_janken_img" alt="">');
        }

        if(comp===2){
          $('#comp_what').html('<img src="./images/janken_pa.png" class="comp_janken_img" alt="">');
        }
      }, 1000);

      setTimeout(function() {
          $('#comp_what').html('Lv.100');  // ← 空に戻す
        }, 3000);



      // 勝敗を反映する
      // 勝ったら勝ち数に＋１
      setTimeout(function(){
        if(comp===1 && player===0){
          $('#wincount').text(parseInt($('#wincount').text())+1);
        }

        if(parseInt($('#wincount').text())===1){
          $('#ball_1').html('<img src="./images/none-ball.png" class="balls" class="non_ball_1" width="30px" height="30px" alt="">');
        }

        if(parseInt($('#wincount').text())===2){
          $('#ball_2').html('<img src="./images/none-ball.png" class="balls" class="non_ball_2" width="30px" height="30px" alt="">');
        }

        if(parseInt($('#wincount').text())===3){
          $('#ball_3').html('<img src="./images/none-ball.png" class="balls" class="non_ball_3" width="30px" height="30px" alt="">');
        }

        // 勝ち数が３になったらゲームクリアを表示
        if(parseInt($('#wincount').text())===3){
          $('#game_clear').fadeIn(500);
        }

        // 負けたら負け数に＋１
        if(comp===2 && player===0){
          $('#losecount').text(parseInt($('#losecount').text())+1);
        }

        if(parseInt($('#losecount').text())===1){
          $('#ball_4').html('<img src="./images/none-ball.png" class="balls" class="non_ball_4" width="30px" height="30px" alt="">');
        }

        if(parseInt($('#losecount').text())===2){
          $('#ball_5').html('<img src="./images/none-ball.png" class="balls" class="non_ball_5" width="30px" height="30px" alt="">');
        }

        if(parseInt($('#losecount').text())===3){
          $('#ball_6').html('<img src="./images/none-ball.png" class="balls" class="non_ball_6" width="30px" height="30px" alt="">');
        }

        // 負け数が３になったらゲームオーバーを表示
        if(parseInt($('#losecount').text())===3){
          $('#game_false').fadeIn(500);
        }
      }, 1500);

      
    });

    $('#cho').on('click',function(){
      let player = 1
      const comp = Math.floor(Math.random() * (max-min+1)-min);

      // 選択したのを表示
        setTimeout(function(){
          $('#guchopa').html('<img src="./images/janken_choki.png" class="junken_img" alt="">');
        },1000);

        setTimeout(function() {
            $('#guchopa').html('');  // ← 空に戻す
          }, 3000);
     
      //　じゃんけん・・・の演出
      $('#result').text('じゃんけん・・・')
     
      // 分岐処理
      setTimeout(function(){
        if(comp===0 && player===1){
          $('#result').text('負け')
        } else if (comp===1 && player===1){
          $('#result').text('あいこ')
        } else if (comp===2 && player===1){
          $('#result').text('勝ち')
        }
      }, 1500);
      console.log(comp);

      // コンピュータの手表示
      setTimeout(function(){
        if(comp===0){
          $('#comp_what').html('<img src="./images/janken_gu.png" class="comp_janken_img" alt="">');
        }

        if(comp===1){
          $('#comp_what').html('<img src="./images/janken_choki.png" class="comp_janken_img" alt="">');
        }

        if(comp===2){
          $('#comp_what').html('<img src="./images/janken_pa.png" class="comp_janken_img" alt="">');
        }
      }, 1000);

      setTimeout(function() {
        $('#comp_what').html('Lv.100');//相手の手を元に戻す
      }, 3000);

      // 勝ったら勝ち数に＋１      
      setTimeout(function(){
        if(comp===2 && player===1){
          $('#wincount').text(parseInt($('#wincount').text())+1);
        }

        if(parseInt($('#wincount').text())===1){
          $('#ball_1').html('<img src="./images/none-ball.png" class="balls" class="non_ball_1" width="30px" height="30px" alt="">');
        }

        if(parseInt($('#wincount').text())===2){
          $('#ball_2').html('<img src="./images/none-ball.png" class="balls" class="non_ball_2" width="30px" height="30px" alt="">');
        }

        if(parseInt($('#wincount').text())===3){
          $('#ball_3').html('<img src="./images/none-ball.png" class="balls" class="non_ball_3" width="30px" height="30px" alt="">');
        }

        // 勝ち数が３になったらゲームクリアを表示
        if(parseInt($('#wincount').text())===3){
          $('#game_clear').fadeIn(500);
        }

        // 負けたら負け数に＋１
        if(comp===0 && player===1){
          $('#losecount').text(parseInt($('#losecount').text())+1);
        }

        if(parseInt($('#losecount').text())===1){
          $('#ball_4').html('<img src="./images/none-ball.png" class="balls" class="non_ball_4" width="30px" height="30px" alt="">');
        }

        if(parseInt($('#losecount').text())===2){
          $('#ball_5').html('<img src="./images/none-ball.png" class="balls" class="non_ball_5" width="30px" height="30px" alt="">');
        }

        if(parseInt($('#losecount').text())===3){
          $('#ball_6').html('<img src="./images/none-ball.png" class="balls" class="non_ball_6" width="30px" height="30px" alt="">');
        }

        // 負け数が３になったらゲームオーバーを表示
        if(parseInt($('#losecount').text())===3){
          $('#game_false').fadeIn(500);
        }
      }, 1500);


    });

    $('#pa').on('click',function(){
      let player = 2
      const comp = Math.floor(Math.random() * (max-min+1)-min);
      
      // 選択したのを表示 
        setTimeout(function(){
          $('#guchopa').html('<img src="./images/janken_pa.png" class="junken_img" alt="">');
        },1000);

        setTimeout(function() {
            $('#guchopa').html('');  // ← 空に戻す
          }, 3000);




      // 分岐処理
      setTimeout(function(){
        if(comp===0 && player===2){
          $('#result').text('勝ち')
        } else if (comp===1 && player===2){
          $('#result').text('負け')
        } else if (comp===2 && player===2){
          $('#result').text('あいこ')
        }
      }, 1500);

      console.log(comp);

      // コンピュータの手表示
      setTimeout(function(){
        if(comp===0){
          $('#comp_what').html('<img src="./images/janken_gu.png" class="comp_janken_img" alt="">');
        }

        if(comp===1){
          $('#comp_what').html('<img src="./images/janken_choki.png" class="comp_janken_img" alt="">');
        }

        if(comp===2){
          $('#comp_what').html('<img src="./images/janken_pa.png" class="comp_janken_img" alt="">');
        }
      }, 1000);

      setTimeout(function() {
        $('#comp_what').html("Lv.100");//３秒後に相手の手を戻す
      }, 3000);

      
      setTimeout(function(){
        if(comp===0 && player===2){
          $('#wincount').text(parseInt($('#wincount').text())+1);// 勝ったら勝ち数に＋１
        }

        // 勝ったら相手のボール１減
        if(parseInt($('#wincount').text())===1){
          $('#ball_1').html('<img src="./images/none-ball.png" class="balls" class="non_ball_1" width="30px" height="30px" alt="">');
        }

        if(parseInt($('#wincount').text())===2){
          $('#ball_2').html('<img src="./images/none-ball.png" class="balls" class="non_ball_2" width="30px" height="30px" alt="">');
        }

        if(parseInt($('#wincount').text())===3){
          $('#ball_3').html('<img src="./images/none-ball.png" class="balls" class="non_ball_3" width="30px" height="30px" alt="">');
        }

        // 勝ち数が３になったらゲームクリアを表示
        if(parseInt($('#wincount').text())===3){
          $('#game_clear').fadeIn(500);
        }

        // 負けたら負け数に＋１
        if(comp===1 && player===2){
          $('#losecount').text(parseInt($('#losecount').text())+1);
        }

        // 負けたらグレーボールに置き換え
        if(parseInt($('#losecount').text())===1){
          $('#ball_4').html('<img src="./images/none-ball.png" class="balls" class="non_ball_4" width="30px" height="30px" alt="">');
        }

        if(parseInt($('#losecount').text())===2){
          $('#ball_5').html('<img src="./images/none-ball.png" class="balls" class="non_ball_5" width="30px" height="30px" alt="">');
        }

        if(parseInt($('#losecount').text())===3){
          $('#ball_6').html('<img src="./images/none-ball.png" class="balls" class="non_ball_6" width="30px" height="30px" alt="">');
        }

        // 負け数が３になったらゲームオーバーを表示
        if(parseInt($('#losecount').text())===3){
          $('#game_false').fadeIn(500);
        }

      }, 1500);
      
      
    });

  $('#reset_btn').on('click', function() {
    console.log('reset clicked'); // まず発火確認


    // スコアをリセット
    $('#wincount').text('0');
    $('#losecount').text('0');

    // ボールを元に戻す
    $('#ball_1').html('<img src="./images/ball.png" width="30px" height="30px" alt="" >');
    $('#ball_2').html('<img src="./images/ball.png" width="30px" height="30px" alt="" >');
    $('#ball_3').html('<img src="./images/ball.png" width="30px" height="30px" alt="" >');
    $('#ball_4').html('<img src="./images/ball.png" width="30px" height="30px" alt="" >');
    $('#ball_5').html('<img src="./images/ball.png" width="30px" height="30px" alt="" >');
    $('#ball_6').html('<img src="./images/ball.png" width="30px" height="30px" alt="" >');

    // プレイヤーの手を消す
    $('#guchopa').html('');

    // コンピュータの手を元に戻す
    $('#comp_what').html('Lv.100');

    // テキストを戻す
    $('#yasei_p').text("野生のじゃんけんが現れた！！");
    $('.select').hide();

    // クリア・ゲームオーバーを消す
    $('#game_clear').hide();
    $('#game_false').hide();
  });

  </script>


</body>

</html>